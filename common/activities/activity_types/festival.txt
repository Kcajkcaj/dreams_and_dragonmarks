activity_festival = {
	is_shown = {
		highest_held_title_tier > tier_barony
		is_landed = yes
		trigger_if = {
			limit = {
				is_ai = yes
			}
			is_at_war = no
		}
	}
	is_valid = {
		# Generic can-continue check.
		scope:host = {
			is_imprisoned = no
			is_landed = yes
			NOT = { is_incapable = yes }
		}
		# If no one shows up
		trigger_if = {
			limit = {
				is_current_phase_active = yes
			}
			has_attending_activity_guests = yes
		}
	}
	can_start_showing_failures_only = {
		is_available_adult = yes
	}
	
	on_invalidated = {
		# Finish later
	}
	
	on_host_death = {
		# Finish later
	}
	
	is_location_valid = {
		has_holding = yes
	}
	
	is_single_location = yes
	
	cooldown = {years = hold_festival_cooldown_value}
	
	province_filter = domain
	ai_province_filter = domain
	
	max_province_icons = 5
	
	cost = {
		gold = {
			add = {
				add = {
					value = festival_activity_cost
					desc = feast_activity_cost_desc
				}
				add = {
					value = festival_activity_cost
					multiply = activity_cost_scale_by_era
					subtract = festival_activity_cost
					desc = activity_cost_scale_by_era_desc
				}
			}
		}
	}
	
	can_be_activity_guest = {
		is_adult = yes
		in_diplomatic_range = scope:host
	}

	host_intents = {
		intents = { reduce_stress_intent }
		default = reduce_stress_intent
	}

	guest_intents = {
		intents = { reduce_stress_intent }
		default = reduce_stress_intent
	}
	
	max_guests = 50

	guest_invite_rules = {
		defaults = {
			1 = activity_invite_rule_courtiers
			1 = activity_invite_rule_vassals
			2 = activity_invite_rule_guests
		}
		rules = {
			# MP 
			6 = activity_invite_mp
		}
	}
	
	wait_time_before_start = {
		months = 3
	}
	
	num_pickable_phases = 3
	
	phases = {
		festival_phase_banquet {
			can_pick = {always = yes}
			on_phase_active = {
				if = {
					limit = {this = scope:host}
					scope:activity = { progress_activity_phase_after = { months = 1 } }
				}
			}
			on_end = {
				if = {
					limit = {this = scope:host}
					scope:activity = { progress_activity_phase_after = { days = 1 } }
				}
			}
		}
		festival_phase_parade {
			can_pick = {always = yes}
			on_phase_active = {
				if = {
					limit = {this = scope:host}
					scope:activity = { progress_activity_phase_after = { months = 1 } }
				}
			}
			on_end = {
				if = {
					limit = {this = scope:host}
					scope:activity = { progress_activity_phase_after = { days = 1 } }
				}
			}
		}
		festival_phase_sermon {
			can_pick = {always = yes}
			on_phase_active = {
				if = {
					limit = {this = scope:host}
					scope:activity = { progress_activity_phase_after = { months = 1 } }
				}
			}
			on_end = {
				if = {
					limit = {this = scope:host}
					scope:activity = { progress_activity_phase_after = { days = 1 } }
				}
			}
		}
		festival_phase_sacrifice {
			can_pick = {faith = {has_doctrine_parameter = human_sacrifice_at_festivals}}
			on_phase_active = {
				if = {
					limit = {this = scope:host}
					scope:activity = { progress_activity_phase_after = { months = 1 } }
				}
			}
			on_end = {
				if = {
					limit = {this = scope:host}
					scope:activity = { progress_activity_phase_after = { days = 1 } }
				}
			}
		}
	}
	
	options = {
		festival_sacrifice_scale = {
			sacrifice_scale_bad = {
				is_shown = {
					always = yes
				}
				is_valid = {
					always = yes
				}
			}
			sacrifice_scale_normal = {
				is_shown = {
					always = yes
				}
				is_valid = {
					always = yes
				}
				cost = {gold = 50}
			}
			sacrifice_scale_good = {
				is_shown = {
					always = yes
				}
				is_valid = {
					always = yes
				}
				cost = {gold = 100}
			}
		}
	}
}